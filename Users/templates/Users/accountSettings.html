
{% extends "Users/profile_base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block profile %}
<div class="card">
        <div class="card-body">
            <div class = "row">
                <div class="col-md-12">
                    <label>Update Username</label>
                    <br>
                    <form method="POST" name="accountSettings">
                    {% csrf_token %}
                    {{ username_form | crispy }}
                  
                    <button  class=" btn btn-outline-info btn-primary" type="button" data-toggle="modal" data-target="#updateModal">Update</button>
                    <!--------- modal-------->
                         <div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  Are you sure?
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>                         
                                <button type="submit" class="btn btn-primary">YES!</button>
                                </div>
                              </div>
                            </div>
                          </div>
                    </form>
               </div>
                 
               <!-- end of modal -->
               <div id="profilePictureBtn" class="col-md-12">
                <form method="POST" action="{% url 'profile_settings:change_avatar' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{picture_form | crispy}}
                 <button class="btn  btn-secondary" type="submit">Change Profile Picture</button>
                </form>

               </div>
               {% if messages %}
               <div aria-live="polite" aria-atomic="true" style="position: relative; min-height: 200px;">
                  <div style="position: absolute; top: 0; right: 0;">
               <div role="alert" aria-live="assertive" aria-atomic="true" class="toast" data-autohide="false">
                   <div class="toast-header">
                     <img src="..." class="rounded mr-2" alt="...">
                     <strong class="mr-auto">Bootstrap</strong>
                     <small>11 mins ago</small>
                     <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                       <span aria-hidden="true">&times;</span>
                     </button>
                   </div>
                   <div class="toast-body">
                     <ul class="messages">
                      {% for message in messages %}
                      <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                      {% endfor %}
                      </ul> 
                   </div>
                 </div>
                 </div>
                 </div>
            
                 {% endif %}

    </div>

<style>
 .modal-backdrop{
   z-index:-1;
  }
</style>



{% endblock %}